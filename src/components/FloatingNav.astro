---
// Navegaci贸n flotante moderna para reemplazar el navbar tradicional
---

<nav
  class="fixed top-6 left-1/2 -translate-x-1/2 z-40 bg-midnight-violet-950/80 backdrop-blur-md border border-honey-bronze-500/20 rounded-full px-6 py-3 shadow-2xl hidden md:block"
>
  <div class="flex items-center space-x-6">
    <!-- Logo -->
    <a
      href="/"
      class="font-serif text-xl text-honey-bronze-400 hover:text-honey-bronze-300 transition-colors"
    >
      Tapti
    </a>

    <!-- Separador -->
    <div class="w-px h-6 bg-honey-bronze-500/30"></div>

    <!-- Links de navegaci贸n -->
    <div class="flex items-center space-x-4">
      <a
        href="/catalogo"
        class="text-sm text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors px-3 py-1 rounded-full hover:bg-honey-bronze-500/10"
      >
        Cat谩logo
      </a>
      <a
        href="/membresias"
        class="text-sm text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors px-3 py-1 rounded-full hover:bg-honey-bronze-500/10"
      >
        Membres铆as
      </a>
      <a
        href="/sobre"
        class="text-sm text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors px-3 py-1 rounded-full hover:bg-honey-bronze-500/10"
      >
        Sobre
      </a>
      <a
        href="/contacto"
        class="text-sm text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors px-3 py-1 rounded-full hover:bg-honey-bronze-500/10"
      >
        Contacto
      </a>

      <div class="w-px h-4 bg-honey-bronze-500/30 mx-2"></div>

      <a
        href="/carrito"
        id="cart-btn-desktop"
        class="text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors p-2 rounded-full hover:bg-honey-bronze-500/10 relative"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path
            d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
          ></path>
        </svg>
        <span
          id="cart-count-desktop"
          class="absolute -top-1 -right-1 bg-honey-bronze-500 text-midnight-violet-950 text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center hidden"
          >0</span
        >
      </a>
    </div>
  </div>
</nav>

<script>
  import { cartItems } from "../store/cartStore";

  const desktopCount = document.getElementById("cart-count-desktop");
  const mobileCount = document.getElementById("cart-count-mobile");

  cartItems.subscribe((items) => {
    const count = Object.values(items).reduce(
      (acc: any, item: any) => acc + item.quantity,
      0,
    );

    if (desktopCount) {
      desktopCount.innerText = (count as number).toString();
      if ((count as number) > 0) desktopCount.classList.remove("hidden");
      else desktopCount.classList.add("hidden");
    }

    if (mobileCount) {
      mobileCount.innerText = (count as number).toString();
      if ((count as number) > 0) mobileCount.classList.remove("hidden");
      else mobileCount.classList.add("hidden");
    }
  });
</script>

<!-- Versi贸n m贸vil -->
<div
  class="md:hidden fixed bottom-6 left-6 right-6 z-40 bg-midnight-violet-950/90 backdrop-blur-md border border-honey-bronze-500/20 rounded-2xl p-4 shadow-2xl"
>
  <div class="grid grid-cols-5 gap-2">
    <a
      href="/catalogo"
      class="text-center py-2 text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors"
    >
      <div class="text-lg mb-1"></div>
      <span class="text-xs">Cat谩logo</span>
    </a>
    <a
      href="/membresias"
      class="text-center py-2 text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors"
    >
      <div class="text-lg mb-1"></div>
      <span class="text-xs">Membres铆as</span>
    </a>
    <a
      href="/sobre"
      class="text-center py-2 text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors"
    >
      <div class="text-lg mb-1"></div>
      <span class="text-xs">Sobre</span>
    </a>
    <a
      href="/contacto"
      class="text-center py-2 text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors"
    >
      <div class="text-lg mb-1"></div>
      <span class="text-xs">Contacto</span>
    </a>
    <a
      href="/carrito"
      id="cart-btn-mobile"
      class="text-center py-2 text-cherry-blossom-100 hover:text-honey-bronze-400 transition-colors relative"
    >
      <div class="text-lg mb-1 flex justify-center">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="20"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
        >
          <circle cx="9" cy="21" r="1"></circle>
          <circle cx="20" cy="21" r="1"></circle>
          <path
            d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"
          ></path>
        </svg>
      </div>
      <span class="text-xs">Carrito</span>
      <span
        id="cart-count-mobile"
        class="absolute top-1 right-2 bg-honey-bronze-500 text-midnight-violet-950 text-[10px] font-bold w-4 h-4 rounded-full flex items-center justify-center hidden"
        >0</span
      >
    </a>
  </div>
</div>
